{
    "description": "Creating a persisted entity generating id for the entity key and reuse it in the entity body",
    "request": {
        "method": "POST",
        "path": "/users"
    },
    "persist": {
        "entity": "/users/user-{{storage.Sequence('user', 1)}}.json",
        "actions" : {
            "write" : "{{ request.body }}",
            "append" : "{ \"id\": {{persist.entity.name./users/user\\-(?P<value>\\d+)\\.json}}, \"uuid\" : \"{{ fake.UUID }}\" }"
        }
    },
    "response": {
        "statusCode": 202,
        "headers": {
            "Content-Type": [
                "application/json"
            ]
        },
        "body":"{{ persist.entity.content }}"
    }
}